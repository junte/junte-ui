<jnt-container>

  <jnt-app-page-header [icon]="localUi.icons.filter"
                       title="Filter"
                       i18n-title="@@label.filter"
                       [teaser]="handbook.forms.components.filter.teaser">

    <ng-template #headerActionsTemplate>
      <jnt-stack [orientation]="ui.orientation.horizontal">
        <jnt-link [icon]="ui.icons.gitlab"
                  [outline]="ui.outline.ghost"
                  [source]="gitlab"
                  target="_blank" title="GitLab"
                  i18n-title="@@action.gitlab">
        </jnt-link>
        <jnt-link [icon]="ui.icons.figma"
                  [outline]="ui.outline.ghost"
                  [source]="figma"
                  target="_blank" title="Figma"
                  i18n-title="@@action.figma">
        </jnt-link>
      </jnt-stack>

    </ng-template>
  </jnt-app-page-header>

  <jnt-stack [align]="ui.align.stretch">
    <div teaser>
      <p></p>
    </div>
  </jnt-stack>

  <jnt-tabs #tabs>

    <jnt-tab title="Preview"
             i18n-title="@@label.preview"
             [icon]="localUi.icons.preview">
      <ng-template #tabContentTemplate>
        <jnt-row>
          <jnt-col [tablet]="9">
            <app-browser-preview>
              <ng-template #document let-height="height">
                <jnt-form [formGroup]="form">
                  <jnt-stack [align]="ui.align.stretch">
                    <jnt-row>
                      <jnt-col [tablet]="4" [mobile]="12">
                        <jnt-form-item>
                          <jnt-form-label for="skills">Ability</jnt-form-label>
                          <jnt-form-control>
                            <jnt-select formControlName="abilities"
                                        placeholder="Select abilities"
                                        i18n-placeholder="@@label.select_abilities"
                                        [features]="[ui.feature.allowEmpty]">
                              <jnt-select-option label="Immortality"
                                                 i18n-label="@@label.immortality"
                                                 [key]="abilities.immortality"></jnt-select-option>
                              <jnt-select-option label="Fly ability"
                                                 i18n-label="@@label.fly"
                                                 [key]="abilities.fly"></jnt-select-option>
                              <jnt-select-option label="Superhuman strength"
                                                 i18n-label="@@label.superhuman_strength"
                                                 [key]="abilities.strength"></jnt-select-option>
                              <jnt-select-option label="Genius Intellect"
                                                 i18n-label="@@label.genius_intellect"
                                                 [key]="abilities.intellect"></jnt-select-option>
                            </jnt-select>
                          </jnt-form-control>
                        </jnt-form-item>
                      </jnt-col>

                      <jnt-col [tablet]="4" [mobile]="12">
                        <jnt-form-item>
                          <jnt-form-label for="sources" i18n="@@label.sources">Ability source</jnt-form-label>
                          <jnt-form-control>
                            <jnt-select formControlName="sources"
                                        placeholder="Select source"
                                        i18n-placeholder="@@label.select_sources"
                                        [features]="[ui.feature.allowEmpty]">
                              <jnt-select-option label="Technologies"
                                                 i18n-label="@@label.technologies"
                                                 [key]="sources.technologies"></jnt-select-option>
                              <jnt-select-option label="Acquired"
                                                 i18n-label="@@label.acquired"
                                                 [key]="sources.acquired"></jnt-select-option>
                              <jnt-select-option label="Congenital"
                                                 i18n-label="@@label.congenital"
                                                 [key]="sources.congenital"></jnt-select-option>
                            </jnt-select>
                          </jnt-form-control>
                        </jnt-form-item>
                      </jnt-col>

                      <jnt-col [tablet]="4" [mobile]="12">
                        <jnt-form-item>
                          <jnt-form-label for="universes" i18n="@@label.universe">Universe</jnt-form-label>
                          <jnt-form-control>
                            <jnt-select formControlName="universes"
                                        placeholder="Select universe"
                                        i18n-placeholder="@@label.select_world"
                                        [features]="[ui.feature.allowEmpty]">
                              <jnt-select-option label="DC"
                                                 i18n-label="@@label.dc"
                                                 [key]="universes.dc"></jnt-select-option>
                              <jnt-select-option label="Marvel"
                                                 i18n-label="@@label.marvel"
                                                 [key]="universes.marvel"></jnt-select-option>
                              <jnt-select-option label="X-Men"
                                                 i18n-label="@@label.xmen"
                                                 [key]="universes.xmen"></jnt-select-option>
                            </jnt-select>
                          </jnt-form-control>
                        </jnt-form-item>
                      </jnt-col>
                    </jnt-row>

                    <jnt-stack [orientation]="ui.orientation.horizontal">
                      <jnt-filter [icon]="iconControl.value ? ui.icons.information: null"
                                  [selected]="!!abilitiesControl?.value"
                                  (clear)="abilitiesControl.setValue(null)"
                                  placeholder="Choose ability"
                                  i18n-placeholder="@@label.choose_ability"
                                  [label]="abilitiesControl.value"></jnt-filter>
                      <jnt-filter [control]="sourcesControl"
                                  [icon]="iconControl.value ? ui.icons.time : null"
                                  placeholder="Choose a source"
                                  i18n-placeholder="@@label.choose_a_source"
                                  [label]="sourcesControl.value"></jnt-filter>
                      <jnt-filter [control]="universesControl"
                                  [icon]="iconControl.value ? ui.icons.cloud : null"
                                  placeholder="Choose a universe"
                                  i18n-placeholder="@@label.choose_universe"
                                  [label]="universesControl.value"></jnt-filter>
                    </jnt-stack>

                    <jnt-avatars-list [max]="12">
                      <jnt-avatar *ngIf="filteredControl.value | includes:hero.spiderman"
                                  image="assets/images/heroes/spiderman.svg"></jnt-avatar>
                      <jnt-avatar *ngIf="filteredControl.value | includes:hero.ironman"
                                  image="assets/images/heroes/ironman.svg"></jnt-avatar>
                      <jnt-avatar *ngIf="filteredControl.value | includes:hero.captainAmerica"
                                  image="assets/images/heroes/captain.svg"></jnt-avatar>
                      <jnt-avatar *ngIf="filteredControl.value | includes:hero.batman"
                                  image="assets/images/heroes/batman.svg"></jnt-avatar>
                      <jnt-avatar *ngIf="filteredControl.value | includes:hero.wolverine"
                                  image="assets/images/heroes/wolverine.svg"></jnt-avatar>
                      <jnt-avatar *ngIf="filteredControl.value | includes:hero.superman"
                                  image="assets/images/heroes/superman.svg"></jnt-avatar>
                      <jnt-avatar *ngIf="filteredControl.value | includes:hero.wonder"
                                  image="assets/images/heroes/wonder.svg"></jnt-avatar>
                      <jnt-avatar *ngIf="filteredControl.value | includes:hero.thanos"
                                  image="assets/images/heroes/thanos.svg"></jnt-avatar>
                      <jnt-avatar *ngIf="filteredControl.value | includes:hero.hulk"
                                  image="assets/images/heroes/hulk.svg"></jnt-avatar>
                      <jnt-avatar *ngIf="!filteredControl.value?.length"
                                  [icon]="ui.icons.question"></jnt-avatar>
                    </jnt-avatars-list>
                  </jnt-stack>
                </jnt-form>
              </ng-template>
            </app-browser-preview>
          </jnt-col>
          <jnt-col [tablet]="3">
            <jnt-form [formGroup]="builder">
              <jnt-checkbox formControlName="icon"
                            i18n-label="@@label.icon"
                            label="Icon"></jnt-checkbox>
            </jnt-form>
          </jnt-col>
        </jnt-row>
      </ng-template>
    </jnt-tab>

    <jnt-tab title="Code"
             i18n-title="@@label.code"
             [icon]="localUi.icons.code">
      <ng-template #tabContentTemplate>
        <jnt-accordion [active]="1">
          <jnt-accordion-section title="How to start"
                                 i18n-title="@@label.how_to_start">
            <ng-template #accordionContentTemplate>
              <app-how-to-use
                [test]="{selector:'filter-test', type: 'FilterTestComponent'}"
                scss="forms/filter"></app-how-to-use>
            </ng-template>
          </jnt-accordion-section>
          <jnt-accordion-section title="Component template"
                                 i18n-title="@@label.component_template">
            <ng-template #accordionContentTemplate>
              <app-code-highlight file="filter-test.component.html">
                <!-- @formatter:off-->
                <![CDATA[
                    <jnt-filter [control]="abilitiesControl"
                                placeholder="Pick an ability"
                                [label]="abilitiesControl.value"]]>
                      <ng-container *ngIf="iconControl.value">
                        <![CDATA[ [icon]="ui.icons.information"]]>
                      </ng-container>
                      <![CDATA[ >
                    </jnt-filter>
                    <jnt-filter [control]="sourcesControl"
                                placeholder="Pick a source"
                                [label]="sourcesControl.value"]]>
                      <ng-container *ngIf="iconControl.value">
                        <![CDATA[ [icon]="ui.icons.time"]]>
                      </ng-container>
                      <![CDATA[ >
                    </jnt-filter>
                    <jnt-filter [control]="universesControl"
                                placeholder="Pick a world"
                                [label]="universesControl.value"]]>
                      <ng-container *ngIf="iconControl.value">
                        <![CDATA[ [icon]="ui.icons.cloud"]]>
                      </ng-container>
                      <![CDATA[ >
                    </jnt-filter>
                ]]>
              </app-code-highlight>
              <app-code-highlight file="filter-test.component.ts"
                                  [language]="language.typescript">
    <pre><![CDATA[
      import { Component } from '@angular/core';
      import { FormBuilder, FormControl } from '@angular/forms';
      import { UI } from 'junte-ui';

      @Component({
      selector: 'app-filter-test',
      templateUrl: './filter-test.component.html',
      styleUrls: ['./filter-test.component.scss']
      })

      export class FilterTestComponent {

      ui = UI;
       abilitiesControl = new FormControl(null);
       sourcesControl = new FormControl(null);
       universesControl = new FormControl(null);

  form = this.fb.group({
    abilities: this.abilitiesControl,
    sources: this.sourcesControl,
    universes: this.universesControl,
  });

        constructor(private fb: FormBuilder) {}
    }]]></pre>
                <!-- @formatter:on-->
              </app-code-highlight>
            </ng-template>
          </jnt-accordion-section>
        </jnt-accordion>
      </ng-template>
    </jnt-tab>

    <jnt-tab title="API" [icon]="localUi.icons.api">
      <ng-template #tabContentTemplate>
        <app-component-api selector="jnt-filter" [target]="types.filter"></app-component-api>
      </ng-template>
    </jnt-tab>
  </jnt-tabs>

</jnt-container>
